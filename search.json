[{"title":"Markdown 语法示例","url":"/2022/05/11/Markdown/","content":"<h1 id=\"标题\"><a href=\"#标题\" class=\"headerlink\" title=\"标题\"></a>标题</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 一级标题</span><br><span class=\"line\">## 二级标题</span><br><span class=\"line\">### 三级标题</span><br><span class=\"line\">#### 四级标题</span><br><span class=\"line\">##### 五级标题</span><br><span class=\"line\">###### 六级标题</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"一级标题\"><a href=\"#一级标题\" class=\"headerlink\" title=\"一级标题\"></a>一级标题</h1><h2 id=\"二级标题\"><a href=\"#二级标题\" class=\"headerlink\" title=\"二级标题\"></a>二级标题</h2><h3 id=\"三级标题\"><a href=\"#三级标题\" class=\"headerlink\" title=\"三级标题\"></a>三级标题</h3><h4 id=\"四级标题\"><a href=\"#四级标题\" class=\"headerlink\" title=\"四级标题\"></a>四级标题</h4><h5 id=\"五级标题\"><a href=\"#五级标题\" class=\"headerlink\" title=\"五级标题\"></a>五级标题</h5><h6 id=\"六级标题\"><a href=\"#六级标题\" class=\"headerlink\" title=\"六级标题\"></a>六级标题</h6><h2 id=\"标题编号\"><a href=\"#标题编号\" class=\"headerlink\" title=\"标题编号\"></a>标题编号</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">### 标题编号 &#123;#id&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"标题编号-1\"><a href=\"#标题编号-1\" class=\"headerlink\" title=\"标题编号\"></a>标题编号</h3>"},{"title":"android","url":"/2022/05/14/android/","content":""},{"title":"markdown","url":"/2022/05/11/markdown-0/","content":"<h1 id=\"标题\"><a href=\"#标题\" class=\"headerlink\" title=\"标题\"></a>标题</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 一级标题</span><br><span class=\"line\">## 二级标题</span><br><span class=\"line\">### 三级标题</span><br><span class=\"line\">#### 四级标题</span><br><span class=\"line\">##### 五级标题</span><br><span class=\"line\">###### 六级标题</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"一级标题\"><a href=\"#一级标题\" class=\"headerlink\" title=\"一级标题\"></a>一级标题</h1><h2 id=\"二级标题\"><a href=\"#二级标题\" class=\"headerlink\" title=\"二级标题\"></a>二级标题</h2><h3 id=\"三级标题\"><a href=\"#三级标题\" class=\"headerlink\" title=\"三级标题\"></a>三级标题</h3><h4 id=\"四级标题\"><a href=\"#四级标题\" class=\"headerlink\" title=\"四级标题\"></a>四级标题</h4><h5 id=\"五级标题\"><a href=\"#五级标题\" class=\"headerlink\" title=\"五级标题\"></a>五级标题</h5><h6 id=\"六级标题\"><a href=\"#六级标题\" class=\"headerlink\" title=\"六级标题\"></a>六级标题</h6><h2 id=\"标题编号\"><a href=\"#标题编号\" class=\"headerlink\" title=\"标题编号\"></a>标题编号</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">### 标题编号 &#123;#id&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"标题编号-1\"><a href=\"#标题编号-1\" class=\"headerlink\" title=\"标题编号\"></a>标题编号</h3>"},{"title":"七牛云使用笔记","url":"/2022/05/11/oss/","content":"<h2 id=\"七牛云配置\"><a href=\"#七牛云配置\" class=\"headerlink\" title=\"七牛云配置\"></a>七牛云配置</h2><ul>\n<li><p>进入七牛云官网<a href=\"https://www.qiniu.com/\">七牛云 - 国内领先的企业级云服务商 (qiniu.com)</a></p>\n</li>\n<li><p>注册七牛云账号并登录,创建存储</p>\n</li>\n</ul>\n<img src=\"/2022/05/11/oss/image-20220429154222835.png\" class=\"\" title=\"This is an test img\">\n\n<img src=\"/2022/05/11/oss/image-20220429154426967.png\" class=\"\" title=\"This is an test img\">\n\n<img src=\"/2022/05/11/oss/image-20220429155608766.png\" class=\"\" title=\"This is an test img\">\n\n\n\n\n<h3 id=\"创建SpringBoot项目\"><a href=\"#创建SpringBoot项目\" class=\"headerlink\" title=\"创建SpringBoot项目\"></a>创建SpringBoot项目</h3><blockquote>\n<p> application.yml</p>\n</blockquote>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#七牛云配置</span></span><br><span class=\"line\"><span class=\"attr\">oss:</span></span><br><span class=\"line\">  <span class=\"attr\">domain:</span> <span class=\"string\">http://******.hd-bkt.clouddn.com/</span>  <span class=\"comment\"># 访问域名(默认使用七牛云测试域名) 测试域名有效期仅为30天，建议更换为自有域名</span></span><br><span class=\"line\">  <span class=\"attr\">accessKey:</span> <span class=\"string\">*****</span> <span class=\"comment\"># 公钥 AK</span></span><br><span class=\"line\">  <span class=\"attr\">secretKey:</span> <span class=\"string\">*****</span> <span class=\"comment\"># 私钥 SK</span></span><br><span class=\"line\">  <span class=\"attr\">bucket:</span> <span class=\"string\">****</span>  <span class=\"comment\">#存储空间名称 创建的存储空间名称</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>pom.xml</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.code.gson<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>gson<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.8.6<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.qiniu<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>qiniu-java-sdk<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>[7.7.0, 7.7.99]<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>UploadController.java</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Api(tags = &quot;上传&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UploadController</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UploadService uploadService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ApiOperation(value = &quot;文件上传&quot;)</span></span><br><span class=\"line\">    <span class=\"meta\">@PostMapping(&quot;/upload&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> ApiResult <span class=\"title function_\">upload</span><span class=\"params\">(<span class=\"meta\">@RequestPart</span> MultipartFile file)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> uploadService.upload(file);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ApiResult.success(url);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>UploadServiceImpl.java</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@ConfigurationProperties(prefix = &quot;oss&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UploadServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">UploadService</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String accessKey;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String secretKey;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String bucket;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String domain;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">upload</span><span class=\"params\">(MultipartFile file)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//判断文件类型</span></span><br><span class=\"line\">        <span class=\"comment\">//获取原始文件名</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (file == <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            ApiAsserts.fail(<span class=\"string\">&quot;文件上传失败！&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">originalFileName</span> <span class=\"operator\">=</span> file.getOriginalFilename();</span><br><span class=\"line\">        <span class=\"comment\">//对原始文件名进行判断</span></span><br><span class=\"line\">        <span class=\"keyword\">assert</span> originalFileName != <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!originalFileName.endsWith(<span class=\"string\">&quot;.png&quot;</span>) &amp;&amp; !originalFileName.endsWith(<span class=\"string\">&quot;.jpg&quot;</span>) &amp;&amp; !originalFileName.endsWith(<span class=\"string\">&quot;.txt&quot;</span>))&#123;</span><br><span class=\"line\">            <span class=\"comment\">//TODO 抛出错误，此处只允许.png</span></span><br><span class=\"line\">            ApiAsserts.fail(<span class=\"string\">&quot;只可以上传png格式的图片哦！&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">path</span> <span class=\"operator\">=</span> PathUtils.generateFilePath(originalFileName);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> uploadOss(file,path);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String <span class=\"title function_\">uploadOss</span><span class=\"params\">(MultipartFile file , String path)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Configuration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Configuration</span>(Region.autoRegion());</span><br><span class=\"line\">        <span class=\"type\">UploadManager</span> <span class=\"variable\">uploadManager</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">UploadManager</span>(cfg);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">key</span> <span class=\"operator\">=</span> path;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span> file.getInputStream();</span><br><span class=\"line\">            <span class=\"type\">Auth</span> <span class=\"variable\">auth</span> <span class=\"operator\">=</span> Auth.create(accessKey, secretKey);</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">upToken</span> <span class=\"operator\">=</span> auth.uploadToken(bucket);</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"type\">Response</span> <span class=\"variable\">response</span> <span class=\"operator\">=</span> uploadManager.put(inputStream, key, upToken, <span class=\"literal\">null</span>, <span class=\"literal\">null</span>);</span><br><span class=\"line\">                <span class=\"type\">DefaultPutRet</span> <span class=\"variable\">putRet</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Gson</span>().fromJson(response.bodyString(), DefaultPutRet.class);</span><br><span class=\"line\">                System.out.println(putRet.key);</span><br><span class=\"line\">                System.out.println(putRet.hash);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> domain+key;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (QiniuException e) &#123;</span><br><span class=\"line\">                <span class=\"type\">Response</span> <span class=\"variable\">r</span> <span class=\"operator\">=</span> e.response;</span><br><span class=\"line\">                System.err.println(r.toString());</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    System.err.println(r.bodyString());</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (QiniuException e2) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;www&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>PathUtils.java</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PathUtils</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title function_\">generateFilePath</span><span class=\"params\">(String fileName)</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//根据日期生成路径 2022/1/15/</span></span><br><span class=\"line\">        <span class=\"type\">SimpleDateFormat</span> <span class=\"variable\">sdf</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy/MM/dd/&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">datePath</span> <span class=\"operator\">=</span> sdf.format(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">        <span class=\"comment\">//uuid作为文件名</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">uuid</span> <span class=\"operator\">=</span> UUID.randomUUID().toString().replaceAll(<span class=\"string\">&quot;-&quot;</span>, <span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//后缀和文件后缀一致</span></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">index</span> <span class=\"operator\">=</span> fileName.lastIndexOf(<span class=\"string\">&quot;.&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//test.jpg -&gt; .jpg</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">fileType</span> <span class=\"operator\">=</span> fileName.substring(index);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StringBuilder</span>().append(datePath).append(uuid).append(fileType).toString();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h2><p>使用ApiPost进行测试</p>\n<img src=\"/2022/05/11/oss/image-20220429162138190.png\" class=\"\" title=\"测试\">\n\n\n<img src=\"/2022/05/11/oss/image-20220429164117255.png\" class=\"\" title=\"测试\">\n\n\n<p>即可在浏览器中访问到此资源。</p>\n"},{"title":"代码演示","url":"/2022/05/10/test/","content":"<img src=\"/2022/05/10/test/img.png\" class=\"\" title=\"This is an test img\">\n\n\n\n\n    <div id=\"aplayer-eDosbyUq\" class=\"aplayer aplayer-tag-marker meting-tag-marker\"\n         data-id=\"8264962167\" data-server=\"tencent\" data-type=\"playlist\" data-mode=\"circulation\" data-autoplay=\"false\" data-mutex=\"true\" data-listmaxheight=\"340px\" data-preload=\"auto\" data-theme=\"#555\"\n    ></div>\n","tags":["-测试"]}]